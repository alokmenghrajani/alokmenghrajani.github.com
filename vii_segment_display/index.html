<html>
<head>
<style>
body {
  margin: 0 auto;
}
object {
  width: 7ch;
  padding: 0 1ch;
}
p {
  text-align: center;
}
div {
  padding: 20ch 0;
  text-align: center;
}
</style>
</head>
<body>

<!--
  aa       gg
  aa c   e gg
  aa  c e  gg
  aa       gg
  aa  f d  gg
  aa f   d gg
  aa  bbb  gg
 -->
  <div>
    <object id="seg14" data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg13" data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg12" data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg11" data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg10" data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg9" data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg8" data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg7" data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg6"  data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg5"  data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg4"  data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg3"  data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg2"  data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg1"  data="vii_segment_display.svg" type="image/svg+xml"></object>
    <object id="seg0"  data="vii_segment_display.svg" type="image/svg+xml"></object>
  </div>
  <p>VII-segment display. Like <a href="https://en.wikipedia.org/wiki/Seven-segment_display">seven-segment display</a>, but with <a href="https://en.wikipedia.org/wiki/Roman_numerals">Roman numerals</a>.</p>
  <p><i>by <a href="https://quaxio.com/">Alok Menghrajani</a></i></p>

<script>
let segments = {
  'I': ['a'],
  'V': ['a', 'f', 'e'],
  'X': ['c', 'd', 'e', 'f'],
  'L': ['a', 'b'],
  'C': ['e', 'd'],
  'D': ['a', 'c', 'f'],
  'M': ['a', 'c', 'e', 'g']
};

function integer_to_roman(num) {
  var digits = (num+"").split(""),
  key = ["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM",
  "","X","XX","XXX","XL","L","LX","LXX","LXXX","XC",
  "","I","II","III","IV","V","VI","VII","VIII","IX"],
  roman_num = "",
  i = 3;
  while (i--) {
    roman_num = (key[+digits.pop() + (i * 10)] || "") + roman_num;
  }
  return Array(+digits.join("") + 1).join("M") + roman_num;
}

function render(char, offset) {
  let el = document.getElementById("seg" + offset);
  for (let i=0; i<segments[char].length; i++) {
    el.contentDocument.getElementById(segments[char][i]).style.fill = "black";
  }

}

window.addEventListener("load", _ => {
  // grab n from url
  let n = window.location.search.substr(1) | 0;
  if ((n < 1) || (n > 3999)) {
    n = 1;
  }
  // convert n to roman
  let r = integer_to_roman(n);

  for (let i=0; i<r.length; i++) {
    render(r[i], r.length - i - 1);
  }
});
</script>
</body>
</html>
